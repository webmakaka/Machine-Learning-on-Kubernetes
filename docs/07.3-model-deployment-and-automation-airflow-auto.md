# Chapter 7. Model Deployment and Automation

<br/>

### Automating ML model deployments in Airflow

<br/>

model_deploy.pipeline

<br/>

Перетаскиваем

model_build_push -> build_push_image.py

model_deploy -> deploy_model.py

<br/>

**build_push_image.py**

Kaniko Container Builder

<br/>

File Dependencies

```
Dockerfile
base_requirements.txt
Predictor.py
```

<br/>

```
Environment Variables

MODEL_NAME=mlflowdemo
MODEL_VERSION=1
CONTAINER_REGISTRY=https://index.docker.io/v1/
CONTAINER_REGISTRY_USER=webmakaka
CONTAINER_REGISTRY_PASSWORD=mypassword
CONTAINER_DETAILS=webmakaka/mlflowdemo:latest
```

<br/>

**deploy_model.py**

Airflow Python Runner

<br/>

```
File Dependencies:

Ingress.yaml
SeldonDeploy.yaml
```

<br/>

```
Environment Variables

MODEL_NAME=mlflowdemo
MODEL_VERSION=1
CONTAINER_DETAILS=webmakaka/mlflowdemo:latest
CLUSTER_DOMAIN_NAME=192.168.49.2.nip.io
```

<br/>

```
Play

Pipeline Name: model_deploy
Runtime Platform: Apache Airflow runtime
Runtime Configuration: MyAirflow
```
